$("#main-nav li ul").hide(),$("#main-nav li a.current").parent().find("ul").slideToggle("slow"),$("#main-nav li a.nav-top-item").click(function(){return $(this).parent().siblings().find("ul").slideUp("normal"),$(this).next().slideToggle("normal"),!1}),$("#main-nav li .nav-top-item").hover(function(){$(this).stop().animate({paddingRight:"25px"},200)},function(){$(this).stop().animate({paddingRight:"15px"})}),$(".content-box-header h3").css({cursor:"s-resize"}),$(".closed-box .content-box-content").hide(),$(".closed-box .content-box-tabs").hide(),$(".content-box-header h3").click(function(){$(this).parent().next().toggle(),$(this).parent().parent().toggleClass("closed-box"),$(this).parent().find(".content-box-tabs").toggle()}),$(document).on("click",".content-box ul.content-box-tabs li a",function(){$(this).parent().siblings().find("a").removeClass("current"),$(this).addClass("current");var i=$(this).attr("href");return $(i).siblings().hide(),$(i).show(),!1}),$(document).on("click",".close",function(){return $(this).parent().fadeTo(400,0,function(){$(this).slideUp(400)}),!1}),$(document).on("click",".check-all",function(){$(this).parent().parent().parent().parent().find("input[type='checkbox']").prop("checked",$(this).is(":checked"))}),window.ui={waiting:function(){$.dialog({title:"系统提示",lock:!0,title:"系统提示",background:"#000",opacity:.5,content:"系统处理中，请稍后...",icon:"loading.gif",id:"waitdialog",drag:!1,resize:!1,cancel:function(){this.reload()}})},hidewaiting:function(){$.dialog({id:"waitdialog"}).hide()},errorDialog:function(i){jError(i,{HorizontalPosition:"center",VerticalPosition:"center",onClosed:function(){callback&&callback()}})},notifyDialog:function(i,t){jNotify(i,{HorizontalPosition:"center",VerticalPosition:"center",onClosed:function(){t&&t()}})},succesDialog:function(i,t){jSuccess(i,{HorizontalPosition:"center",VerticalPosition:"center",onClosed:function(){t&&t()}})},getSelect:function(i){var t=$("#"+i+" table tbody input:checkbox:checked"),e=[];return 0==t.length?($.dialog.alert("请先通过记录左侧复选框，选择要导出的数据，或点击全部导出！"),!1):($.each(t,function(){$(this).attr("data-id")&&e.push($(this).attr("data-id"))}),e.join(","))},loadpage:function(i){ui.waiting();var t=i.url,e=i.conid;$.ajax({url:t,success:function(t){ui.hidewaiting(),i.father?$("#"+e,parent.document).html(t):$("#"+e).html(t),i.index||jNotify("系统数据已自动更新完毕！")},error:function(){ui.hidewaiting(),ui.errorDialog("数据加载失败,点击确定可重新加载！")}})},getchosenSelect:function(i){var t=[];return $("#"+i+"_chosen .chosen-choices li span").each(function(){t.push($(this).html())}),0==t.length&&(t=!1),t},getchosensingleSelect:function(i){var t=$("#"+i+"_chosen .chosen-single  span").html();return t&&"请选择"!=t||(t=!1),t}},$(document).on("click",".detail",function(){var i=JSON.parse($(this).attr("data-detailinfo"));return _title=$(this).attr("title"),_url=i.page,_id=i.id,$.dialog({title:_title,width:"700px",height:"350px",content:"url:index.php?r="+_url+"&id="+_id}),!1}),$(document).on("click",".delete",function(){var i=JSON.parse($(this).attr("data-deleteinfo"));return _url=i.page,_channelid=i.channelid,_id=i.id,$.dialog.confirm("您确定要删除这条数据么？",function(){ui.waiting(),$.ajax({type:"POST",url:"index.php?r="+_url,data:{datas:_id},dataType:"json",success:function(i){ui.hidewaiting(),i.success?ui.succesDialog(i.message,function(){listener.trigger(_channelid,"success","delete")}):ui.errorDialog(i.message)},error:function(){ui.hidewaiting(),ui.errorDialog("删除数据失败，点击确认可以刷新页面！")}})},function(){}),!1}),$(document).on("click",".deleteall",function(){var i=JSON.parse($(this).attr("data-deleteinfo")),t=ui.getSelect(i.conid),e=i.channelid,n=i.page;if(t)return $.dialog.confirm("您确定要删除选中的这些数据么？",function(){ui.waiting(),$.ajax({type:"POST",url:"index.php?r="+n,data:{datas:t},dataType:"json",success:function(i){ui.hidewaiting(),i.success?ui.succesDialog(i.message,function(){listener.trigger(e,"success","delete")}):ui.errorDialog(i.message)},error:function(){ui.hidewaiting(),ui.errorDialog("删除数据失败，点击确认可以刷新页面！")}})},function(){}),!1}),$(document).on("click",".exportexcel",function(){var i=JSON.parse($(this).attr("data-excelinfo")),t=ui.getSelect(i.conid),e=i.page;if(t)return $.dialog.confirm("您确定要导出选中的这些数据到excel么？",function(){location.href="index.php?r="+e+"&ids="+t},function(){jNotify("您可以重新要导出到EXCEL的数据了！")}),!1}),$(document).on("click",".edit",function(){var i=JSON.parse($(this).attr("data-editinfo"));return _title=$(this).attr("title"),_url=i.page,_id=i.id,$.dialog({title:_title,width:"700px",height:"350px",content:"url:index.php?r="+_url+"&id="+_id}),!1}),$(document).on("click","input[type=submit]",function(){var i=$($(this)[0].form),t=$(this),e=i.attr("action"),n=i.serialize();return ui.waiting(),$.ajax({cache:!0,type:"POST",dataType:"json",url:e,data:n,success:function(e){ui.hidewaiting();var n=e;n.success?ui.succesDialog(n.message,function(){var e=t.attr("data-formtype"),n=i.attr("id"),o=i.attr("data-isneedrefresh");return"jump"==e?void listener.trigger(n,"jump",e):void("need"==o&&listener.trigger(n,"success",e))}):ui.errorDialog(n.message)},error:function(){ui.hidewaiting(),ui.errorDialog("数据提交失败，您可以点击确认刷新或者直接关闭重试！")}}),!1}),$(document).on("click",".pagination a",function(){ui.waiting();var i=$(this).attr("href");if(i){var t=$(this).parent().attr("data-conid");return window.history.pushState({},document.title,i),$.ajax({url:i,success:function(i){ui.hidewaiting(),$("#"+t).html(i),jNotify("系统数据加载成功")},error:function(){ui.hidewaiting(),ui.errorDialog("数据加载失败，请点击确认刷新重试！")}}),!1}});