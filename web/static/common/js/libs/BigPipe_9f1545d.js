var BigPipe=function(){function ajax(e,t,n){var r=new(window.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP");r.onreadystatechange=function(){4==r.readyState&&t(r.responseText)},r.open(n?"POST":"GET",e+"&t="+~~(1e6*Math.random()),!0),n&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.send(n)}function renderPagelet(e,t,n){if(!(e.id in n)){n[e.id]=!0,e.parent_id&&renderPagelet(t[e.parent_id],t,n);var r=document.getElementById(e.id);r||(r=document.createElement("div"),r.id=e.id,document.body.appendChild(r)),r.innerHTML=e.html;for(var a=r.getElementsByTagName("script"),o=0,i=a.length;i>o;o++)node=a[o],text=node.text||node.textContent||node.innerHTML||"",window.eval.call(window,text)}}function render(e){var t,n=e.length,r={},a={};for(t=0;n>t;t++){var o=e[t];r[o.id]=o}for(t=0;n>t;t++)renderPagelet(e[t],r,a)}function process(e){function t(){if(n.style){var t=document.createElement("style");t.innerHTML=n.style,document.getElementsByTagName("head")[0].appendChild(t)}render(e.pagelets),n.js?LazyLoad.js(n.js,function(){n.script&&window.eval(n.script)}):n.script&&window.eval(n.script)}var n=e.resource_map;n.async&&require.resourceMap(n.async),n.css?LazyLoad.css(n.css,t):t()}function asyncLoad(arg){arg instanceof Array||(arg=[arg]);for(var obj,arr=[],i=arg.length-1;i>=0;i--){if(obj=arg[i],!obj.id)throw new Error("missing pagelet id");arr.push("pagelets[]="+obj.id)}var url=location.href.split("#")[0]+(location.search?"&":"?")+arr.join("&")+"&force_mode=1";ajax(url,function(res){var data=window.JSON?JSON.parse(res):eval("("+res+")");process(data)})}return{asyncLoad:asyncLoad}}();